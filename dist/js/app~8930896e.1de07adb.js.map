{"version":3,"sources":["webpack:///src/components/frontend/homepages/Login.vue"],"names":["__webpack_exports__","name","components","Pageheader","_components_layout_Header_vue__WEBPACK_IMPORTED_MODULE_0__","Footer","_components_layout_Footer_vue__WEBPACK_IMPORTED_MODULE_1__","data","email","password","emailnull","passwordnull","error","usertype","currentUserProfile","methods","login","_this","this","$validator","validateAll","then","values","_services_AuthService__WEBPACK_IMPORTED_MODULE_2__","resp","$store","dispatch","token","user","auth","headers","Authorization","state","_services_UsersService__WEBPACK_IMPORTED_MODULE_3__","currentuser","pk","response","user_type","stage","$router","push","catch"],"mappings":"oKAwGAA,EAAA,MACAC,KAAA,QACAC,WAAA,CACAC,WAAAC,EAAA,KACAC,OAAAC,EAAA,MAGAC,KAPA,WAQA,OACAC,MAAA,wBACAC,SAAA,gBACAC,UAAA,KACAC,aAAA,KACAC,MAAA,KACAC,SAAA,KACAC,mBAAA,KAGAC,QAAA,CACAC,MADA,WACA,IAAAC,EAAAC,KACAA,KAAAC,WAAAC,cAAAC,KAAA,SAAAC,GACAA,GAEAC,EAAA,KAAAP,MAAA,CACAR,MAAAS,EAAAT,MACAC,SAAAQ,EAAAR,WAGAY,KAAA,SAAAG,GACAP,EAAAQ,OAAAC,SAAA,WAAAF,EAAAjB,KAAAoB,OACAV,EAAAQ,OAAAC,SAAA,UAAAF,EAAAjB,KAAAqB,MACA,IAAAC,EAAA,CACAC,QAAA,CAAAC,cAAA,OAAAd,EAAAQ,OAAAO,MAAAL,QAGAM,EAAA,KAAAC,YAAAjB,EAAAQ,OAAAO,MAAAJ,KAAAO,GAAAN,GACAR,KAAA,SAAAe,GACAnB,EAAAQ,OAAAC,SAAA,cAAAU,EAAA7B,KAAA8B,WACApB,EAAAQ,OAAAC,SAAA,aAAAU,EAAA7B,KAAAqB,MACA,aAAAQ,EAAA7B,KAAA+B,MACA,cAAArB,EAAAQ,OAAAO,MAAAnB,SACAI,EAAAsB,QAAAC,KAAA,CACAvC,KAAA,cAIAgB,EAAAsB,QAAAC,KAAA,CACAvC,KAAA,cAKAgB,EAAAsB,QAAAC,KAAA,CACAvC,KAAA,eAMAwC,MAAA,SAAA7B,GACA,OAAAA,MAOA6B,MAAA,SAAA7B,GAEA,OADAK,EAAAL,MAAA,0BACAA","file":"js/app~8930896e.1de07adb.js","sourcesContent":["<template>\n    <a-layout>\n\n        <Pageheader/>\n        <a-layout-content :style=\"{ padding: '0 0px', marginTop: '4%' }\">\n\n            <div :style=\"{ background: '#fff', padding: '24px', minHeight: '81vh' }\">\n\n\n                <a-card class=\"center\" v-if=\"!$store.state.isUserLoggedIn\" title=\"Login\" :style=\"{width:'22rem'}\">\n\n                    <p class=\"alert\" v-if=\"error\">{{error}}</p>\n\n\n                    <a-form\n                            id=\"components-form-demo-normal-login\"\n                            :form=\"form\"\n                            class=\"login-form\"\n                            @submit.prevent=\"login\"\n\n                    >\n                        <a-form-item>\n\n                            <a-input\n                                    v-model=\"email\"\n                                    placeholder=\"Email\"\n                                    style=\"z-index: 0\"\n                                    name=\"email\"\n                                    v-validate=\"'required'\"\n                            >\n                                <a-icon\n                                        slot=\"prefix\"\n                                        type=\"user\"\n                                        style=\"color: rgba(0,0,0,.25)\"\n                                />\n                            </a-input>\n\n\n                            <div v-if=\"errors.has('email')\" style=\"color: #f5222d;\" class=\"ant-form-explain\">{{ errors.first('email') }}</div>\n\n\n                        </a-form-item>\n                        <a-form-item>\n\n                            <a-input\n                                    v-model=\"password\"\n                                    placeholder=\"Password\"\n                                    style=\"z-index: 0\"\n                                    type=\"password\"\n                                    name=\"password\"\n                                    v-validate=\"'required'\"\n                            >\n                                <a-icon\n                                        slot=\"prefix\"\n                                        type=\"lock\"\n                                        style=\"color: rgba(0,0,0,.25)\"\n                                />\n                            </a-input>\n                            <div v-if=\"errors.has('password')\" style=\"color: #f5222d;\" class=\"ant-form-explain\">{{ errors.first('password') }}</div>\n\n\n\n\n                        </a-form-item>\n                        <a-form-item>\n\n                            <a\n                                    class=\"login-form-forgot\"\n                                    href=\"\"\n                            >\n                                Forgot password\n                            </a>\n                            <a-button @click=\"login\"\n                                      type=\"primary\"\n                                      class=\"login-form-button\"\n                            >\n                                Log in\n                            </a-button>\n                            Or\n                            <router-link to=\"/register\">\n                                register now!\n                            </router-link>\n                        </a-form-item>\n                    </a-form>\n\n                </a-card>\n\n\n            </div>\n\n\n        </a-layout-content>\n\n        <Footer/>\n    </a-layout>\n</template>\n\n<script>\n    import Pageheader from '@/components/layout/Header.vue'\n    import Footer from '@/components/layout/Footer.vue'\n    import AuthService from '@/services/AuthService'\n    import User from '@/services/UsersService'\n\n\n    export default {\n        name: 'login',\n        components: {\n            Pageheader,\n            Footer,\n\n        },\n        data() {\n            return {\n                email: 'robertruhiu@gmail.com',\n                password: 'Pokerface1994',\n                emailnull: null,\n                passwordnull: null,\n                error: null,\n                usertype: null,\n                currentUserProfile: {},\n            }\n        },\n        methods: {\n            login() {\n                this.$validator.validateAll().then((values) => {\n                    if (values) {\n\n                        AuthService.login({\n                            email: this.email,\n                            password: this.password\n\n                        })\n                            .then(resp => {\n                                this.$store.dispatch('setToken', resp.data.token)\n                                this.$store.dispatch('setUser', resp.data.user)\n                                const auth = {\n                                    headers: {Authorization: 'JWT ' + this.$store.state.token}\n\n                                }\n                                User.currentuser(this.$store.state.user.pk, auth)\n                                    .then(response => {\n                                        this.$store.dispatch('setUsertype', response.data.user_type)\n                                        this.$store.dispatch('setUser_id', response.data.user)\n                                        if (response.data.stage === 'complete') {\n                                            if (this.$store.state.usertype === 'developer') {\n                                                this.$router.push({\n                                                    name: 'developer'\n                                                })\n\n                                            } else {\n                                                this.$router.push({\n                                                    name: 'recruiter'\n                                                })\n\n                                            }\n                                        } else {\n                                            this.$router.push({\n                                                name: 'register'\n                                            })\n\n                                        }\n\n                                    })\n                                    .catch(error => {\n                                        return error\n\n\n                                    });\n\n\n                            })\n                            .catch(error => {\n                                this.error = 'login details incorrect'\n                                return error\n\n                            });\n\n\n                    }\n                })\n            },\n\n\n\n        }\n    }\n</script>\n<style scoped>\n    .center {\n        margin: auto;\n        width: 60%;\n\n        padding: 10px;\n    }\n\n    #components-form-demo-normal-login .login-form {\n        max-width: 300px;\n    }\n\n    #components-form-demo-normal-login .login-form-forgot {\n        float: right;\n    }\n\n    #components-form-demo-normal-login .login-form-button {\n        width: 100%;\n    }\n\n    .alert {\n        padding: 8px;\n        background-color: #fff1f0;\n        border: 1px solid #ffa39e;\n    }\n\n</style>\n"],"sourceRoot":""}