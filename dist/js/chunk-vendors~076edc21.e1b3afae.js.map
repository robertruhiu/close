{"version":3,"sources":["webpack:///./node_modules/ant-design-vue/es/vc-menu/DOMWrap.js"],"names":["babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default","n","babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__","babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default","babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_2__","babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_2___default","babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_3__","babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_3___default","_util_vue_types__WEBPACK_IMPORTED_MODULE_4__","resize_observer_polyfill__WEBPACK_IMPORTED_MODULE_5__","_SubMenu__WEBPACK_IMPORTED_MODULE_6__","_util_BaseMixin__WEBPACK_IMPORTED_MODULE_7__","_util__WEBPACK_IMPORTED_MODULE_8__","_util_vnode__WEBPACK_IMPORTED_MODULE_9__","_util_props_util__WEBPACK_IMPORTED_MODULE_10__","canUseDOM","window","document","createElement","MENUITEM_OVERFLOWED_CLASSNAME","FLOAT_PRECISION_ADJUST","DOMWrap","name","mixins","data","this","resizeObserver","mutationObserver","originalTotalWidth","overflowedItems","menuItemSizes","lastVisibleIndex","undefined","mounted","_this","$nextTick","setChildrenWidthAndResize","level","mode","menuUl","$el","entries","forEach","slice","call","children","concat","el","observe","MutationObserver","disconnect","attributes","childList","subTree","beforeDestroy","methods","getMenuItemNodes","prefixCls","$props","ul","filter","node","className","split","indexOf","getOverflowedSubMenuItem","keyPrefix","renderPlaceholder","h","$createElement","_$props","overflowedIndicator","theme","copy","$slots","_getPropsData","Object","rest","title","eventKey","style","key","length","display","visibility","position","popupClassName","props","k","subMenuProps","disabled","class","on","ulChildrenNodes","lastOverflowedIndicatorPlaceholder","menuItemNodes","c","map","overflowedIndicatorWidth","reduce","acc","cur","handleResize","_this2","width","currentSumWidth","liWidth","setState","renderChildren","_this3","$data","childNode","index","item","overflowed","ret","push","render","arguments","Tag","tag","tagProps","$listeners","oneOf","string","number","visible","bool","hiddenClassName","def","__webpack_exports__"],"mappings":"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","file":"js/chunk-vendors~076edc21.e1b3afae.js","sourcesContent":["import _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport PropTypes from '../_util/vue-types';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport SubMenu from './SubMenu';\nimport BaseMixin from '../_util/BaseMixin';\nimport { getWidth, setStyle, menuAllProps } from './util';\nimport { cloneElement } from '../_util/vnode';\nimport { getClass, getPropsData, getEvents } from '../_util/props-util';\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\nvar MENUITEM_OVERFLOWED_CLASSNAME = 'menuitem-overflowed';\nvar FLOAT_PRECISION_ADJUST = 0.5;\n\n// Fix ssr\nif (canUseDOM) {\n  require('mutationobserver-shim');\n}\n\nvar DOMWrap = {\n  name: 'DOMWrap',\n  mixins: [BaseMixin],\n  data: function data() {\n    this.resizeObserver = null;\n    this.mutationObserver = null;\n\n    // original scroll size of the list\n    this.originalTotalWidth = 0;\n\n    // copy of overflowed items\n    this.overflowedItems = [];\n\n    // cache item of the original items (so we can track the size and order)\n    this.menuItemSizes = [];\n    return {\n      lastVisibleIndex: undefined\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.setChildrenWidthAndResize();\n      if (_this.level === 1 && _this.mode === 'horizontal') {\n        var menuUl = _this.$el;\n        if (!menuUl) {\n          return;\n        }\n        _this.resizeObserver = new ResizeObserver(function (entries) {\n          entries.forEach(_this.setChildrenWidthAndResize);\n        });\n\n        [].slice.call(menuUl.children).concat(menuUl).forEach(function (el) {\n          _this.resizeObserver.observe(el);\n        });\n\n        if (typeof MutationObserver !== 'undefined') {\n          _this.mutationObserver = new MutationObserver(function () {\n            _this.resizeObserver.disconnect();\n            [].slice.call(menuUl.children).concat(menuUl).forEach(function (el) {\n              _this.resizeObserver.observe(el);\n            });\n            _this.setChildrenWidthAndResize();\n          });\n          _this.mutationObserver.observe(menuUl, {\n            attributes: false,\n            childList: true,\n            subTree: false\n          });\n        }\n      }\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n    }\n    if (this.mutationObserver) {\n      this.resizeObserver.disconnect();\n    }\n  },\n\n  methods: {\n    // get all valid menuItem nodes\n    getMenuItemNodes: function getMenuItemNodes() {\n      var prefixCls = this.$props.prefixCls;\n\n      var ul = this.$el;\n      if (!ul) {\n        return [];\n      }\n\n      // filter out all overflowed indicator placeholder\n      return [].slice.call(ul.children).filter(function (node) {\n        return node.className.split(' ').indexOf(prefixCls + '-overflowed-submenu') < 0;\n      });\n    },\n    getOverflowedSubMenuItem: function getOverflowedSubMenuItem(keyPrefix, overflowedItems, renderPlaceholder) {\n      var h = this.$createElement;\n      var _$props = this.$props,\n          overflowedIndicator = _$props.overflowedIndicator,\n          level = _$props.level,\n          mode = _$props.mode,\n          prefixCls = _$props.prefixCls,\n          theme = _$props.theme;\n\n      if (level !== 1 || mode !== 'horizontal') {\n        return null;\n      }\n      // put all the overflowed item inside a submenu\n      // with a title of overflow indicator ('...')\n      var copy = this.$slots['default'][0];\n\n      var _getPropsData = getPropsData(copy),\n          title = _getPropsData.title,\n          eventKey = _getPropsData.eventKey,\n          rest = _objectWithoutProperties(_getPropsData, ['title', 'eventKey']); // eslint-disable-line no-unused-vars\n\n      var style = {};\n      var key = keyPrefix + '-overflowed-indicator';\n\n      if (overflowedItems.length === 0 && renderPlaceholder !== true) {\n        style = {\n          display: 'none'\n        };\n      } else if (renderPlaceholder) {\n        style = {\n          visibility: 'hidden',\n          // prevent from taking normal dom space\n          position: 'absolute'\n        };\n        key = key + '-placeholder';\n      }\n\n      var popupClassName = theme ? prefixCls + '-' + theme : '';\n      var props = {};\n      menuAllProps.props.forEach(function (k) {\n        if (rest[k] !== undefined) {\n          props[k] = rest[k];\n        }\n      });\n      var subMenuProps = {\n        props: _extends({\n          title: overflowedIndicator,\n          popupClassName: popupClassName\n        }, props, {\n          eventKey: keyPrefix + '-overflowed-indicator',\n          disabled: false\n        }),\n        'class': prefixCls + '-overflowed-submenu',\n        key: key,\n        style: style,\n        on: getEvents(copy)\n      };\n\n      return h(\n        SubMenu,\n        subMenuProps,\n        [overflowedItems]\n      );\n    },\n\n\n    // memorize rendered menuSize\n    setChildrenWidthAndResize: function setChildrenWidthAndResize() {\n      if (this.mode !== 'horizontal') {\n        return;\n      }\n      var ul = this.$el;\n\n      if (!ul) {\n        return;\n      }\n\n      var ulChildrenNodes = ul.children;\n\n      if (!ulChildrenNodes || ulChildrenNodes.length === 0) {\n        return;\n      }\n\n      var lastOverflowedIndicatorPlaceholder = ul.children[ulChildrenNodes.length - 1];\n\n      // need last overflowed indicator for calculating length;\n      setStyle(lastOverflowedIndicatorPlaceholder, 'display', 'inline-block');\n\n      var menuItemNodes = this.getMenuItemNodes();\n\n      // reset display attribute for all hidden elements caused by overflow to calculate updated width\n      // and then reset to original state after width calculation\n\n      var overflowedItems = menuItemNodes.filter(function (c) {\n        return c.className.split(' ').indexOf(MENUITEM_OVERFLOWED_CLASSNAME) >= 0;\n      });\n\n      overflowedItems.forEach(function (c) {\n        setStyle(c, 'display', 'inline-block');\n      });\n\n      this.menuItemSizes = menuItemNodes.map(function (c) {\n        return getWidth(c);\n      });\n\n      overflowedItems.forEach(function (c) {\n        setStyle(c, 'display', 'none');\n      });\n      this.overflowedIndicatorWidth = getWidth(ul.children[ul.children.length - 1]);\n      this.originalTotalWidth = this.menuItemSizes.reduce(function (acc, cur) {\n        return acc + cur;\n      }, 0);\n      this.handleResize();\n      // prevent the overflowed indicator from taking space;\n      setStyle(lastOverflowedIndicatorPlaceholder, 'display', 'none');\n    },\n    handleResize: function handleResize() {\n      var _this2 = this;\n\n      if (this.mode !== 'horizontal') {\n        return;\n      }\n\n      var ul = this.$el;\n      if (!ul) {\n        return;\n      }\n      var width = getWidth(ul);\n\n      this.overflowedItems = [];\n      var currentSumWidth = 0;\n\n      // index for last visible child in horizontal mode\n      var lastVisibleIndex = void 0;\n\n      // float number comparison could be problematic\n      // e.g. 0.1 + 0.2 > 0.3 =====> true\n      // thus using FLOAT_PRECISION_ADJUST as buffer to help the situation\n      if (this.originalTotalWidth > width + FLOAT_PRECISION_ADJUST) {\n        lastVisibleIndex = -1;\n\n        this.menuItemSizes.forEach(function (liWidth) {\n          currentSumWidth += liWidth;\n          if (currentSumWidth + _this2.overflowedIndicatorWidth <= width) {\n            lastVisibleIndex++;\n          }\n        });\n      }\n\n      this.setState({ lastVisibleIndex: lastVisibleIndex });\n    },\n    renderChildren: function renderChildren(children) {\n      var _this3 = this;\n\n      // need to take care of overflowed items in horizontal mode\n      var lastVisibleIndex = this.$data.lastVisibleIndex;\n\n      var className = getClass(this);\n      return (children || []).reduce(function (acc, childNode, index) {\n        var item = childNode;\n        var eventKey = getPropsData(childNode).eventKey;\n        if (_this3.mode === 'horizontal') {\n          var overflowed = _this3.getOverflowedSubMenuItem(eventKey, []);\n          if (lastVisibleIndex !== undefined && className[_this3.prefixCls + '-root'] !== -1) {\n            if (index > lastVisibleIndex) {\n              item = cloneElement(childNode,\n              // 这里修改 eventKey 是为了防止隐藏状态下还会触发 openkeys 事件\n              {\n                style: { display: 'none' },\n                props: { eventKey: eventKey + '-hidden' },\n                'class': _extends({}, getClass(childNode), _defineProperty({}, MENUITEM_OVERFLOWED_CLASSNAME, true))\n              });\n            }\n            if (index === lastVisibleIndex + 1) {\n              _this3.overflowedItems = children.slice(lastVisibleIndex + 1).map(function (c) {\n                return cloneElement(c,\n                // children[index].key will become '.$key' in clone by default,\n                // we have to overwrite with the correct key explicitly\n                { key: getPropsData(c).eventKey, props: { mode: 'vertical-left' } });\n              });\n\n              overflowed = _this3.getOverflowedSubMenuItem(eventKey, _this3.overflowedItems);\n            }\n          }\n\n          var ret = [].concat(_toConsumableArray(acc), [overflowed, item]);\n\n          if (index === children.length - 1) {\n            // need a placeholder for calculating overflowed indicator width\n            ret.push(_this3.getOverflowedSubMenuItem(eventKey, [], true));\n          }\n          return ret;\n        }\n        return [].concat(_toConsumableArray(acc), [item]);\n      }, []);\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n\n    var Tag = this.$props.tag;\n    var tagProps = {\n      on: this.$listeners\n    };\n    return h(\n      Tag,\n      tagProps,\n      [this.renderChildren(this.$slots['default'])]\n    );\n  }\n};\n\nDOMWrap.props = {\n  mode: PropTypes.oneOf(['horizontal', 'vertical', 'vertical-left', 'vertical-right', 'inline']),\n  prefixCls: PropTypes.string,\n  level: PropTypes.number,\n  theme: PropTypes.string,\n  overflowedIndicator: PropTypes.node,\n  visible: PropTypes.bool,\n  hiddenClassName: PropTypes.string,\n  tag: PropTypes.string.def('div')\n};\n\nexport default DOMWrap;"],"sourceRoot":""}